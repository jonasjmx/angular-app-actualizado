{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/User/Desktop/angular-app/angular-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CustomerService } from '../services/customer.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/customer.service\";\nexport let ClientsComponent = /*#__PURE__*/(() => {\n  class ClientsComponent {\n    constructor(customerSvc) {\n      this.customerSvc = customerSvc;\n      this.clientes = [];\n      this.loading = true;\n      this.error = '';\n      // MODAL CREAR\n      this.isCreateModalOpen = false;\n      this.newCustomer = {\n        name: ''\n      };\n      // MODAL EDITAR\n      this.isEditModalOpen = false;\n      this.editCustomerId = null;\n      this.editCustomer = {\n        name: ''\n      };\n      this.editCurrentBalance = 0; // solo lectura, viene del backend\n    }\n\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        yield _this.loadCustomers();\n      })();\n    }\n    loadCustomers() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        _this2.loading = true;\n        _this2.error = '';\n        try {\n          const resp = yield _this2.customerSvc.getCustomers();\n          _this2.clientes = resp || [];\n          _this2.loading = false;\n        } catch (err) {\n          console.error('Error al cargar clientes:', err);\n          _this2.error = err?.message || 'Error al cargar clientes';\n          _this2.loading = false;\n        }\n      })();\n    }\n    // ======== CREAR ========\n    openCreateModal() {\n      this.newCustomer = {\n        name: ''\n      };\n      this.isCreateModalOpen = true;\n      this.error = '';\n    }\n    closeCreateModal() {\n      this.isCreateModalOpen = false;\n    }\n    createCustomer() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        _this3.error = '';\n        if (!_this3.newCustomer.name.trim()) {\n          _this3.error = 'El nombre del cliente es obligatorio';\n          return;\n        }\n        try {\n          yield _this3.customerSvc.createCustomer({\n            name: _this3.newCustomer.name.trim()\n          });\n          yield _this3.loadCustomers();\n          _this3.closeCreateModal();\n        } catch (err) {\n          console.error('Error al crear cliente:', err);\n          _this3.error = 'No se pudo crear el cliente';\n        }\n      })();\n    }\n    // ======== EDITAR ========\n    openEditModal(c) {\n      this.editCustomerId = c.id;\n      this.editCustomer = {\n        name: c.name\n      };\n      this.editCurrentBalance = c.currentBalance ?? 0;\n      this.isEditModalOpen = true;\n      this.error = '';\n    }\n    closeEditModal() {\n      this.isEditModalOpen = false;\n      this.editCustomerId = null;\n    }\n    updateCustomer() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this4.editCustomerId) return;\n        _this4.error = '';\n        if (!_this4.editCustomer.name.trim()) {\n          _this4.error = 'El nombre del cliente es obligatorio';\n          return;\n        }\n        try {\n          yield _this4.customerSvc.updateCustomer(_this4.editCustomerId, {\n            name: _this4.editCustomer.name.trim()\n          });\n          yield _this4.loadCustomers();\n          _this4.closeEditModal();\n        } catch (err) {\n          console.error('Error al actualizar cliente:', err);\n          _this4.error = 'No se pudo actualizar el cliente';\n        }\n      })();\n    }\n    // ======== ELIMINAR ========\n    deleteCustomer(c) {\n      var _this5 = this;\n      return _asyncToGenerator(function* () {\n        const ok = confirm(`¿Seguro que deseas eliminar al cliente \"${c.name}\"?`);\n        if (!ok) return;\n        _this5.error = '';\n        try {\n          yield _this5.customerSvc.deleteCustomer(c.id);\n          yield _this5.loadCustomers();\n        } catch (err) {\n          console.error('Error al eliminar cliente:', err);\n          _this5.error = 'No se pudo eliminar el cliente';\n        }\n      })();\n    }\n    static {\n      this.ɵfac = function ClientsComponent_Factory(t) {\n        return new (t || ClientsComponent)(i0.ɵɵdirectiveInject(i1.CustomerService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ClientsComponent,\n        selectors: [[\"app-clients\"]],\n        decls: 0,\n        vars: 0,\n        template: function ClientsComponent_Template(rf, ctx) {},\n        styles: [\".clients-wrapper[_ngcontent-%COMP%]{width:100%;font-family:Arial,sans-serif}.clients-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:10px;color:#164e63}.clients-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:8px;color:#0f172a}.header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.clients-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:10px}.clients-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .clients-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ececec;padding:8px 10px;text-align:left}.clients-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f7fafc}.alert[_ngcontent-%COMP%]{padding:12px;border-radius:6px;margin-bottom:12px;font-size:14px}.alert-error[_ngcontent-%COMP%]{background:#fee2e2;color:#b91c1c;border:1px solid #fecaca}.btn-primary[_ngcontent-%COMP%]{background-color:#2563eb;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer;font-weight:700}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#1d4ed8}.btn-secondary[_ngcontent-%COMP%]{background-color:#64748b;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#475569}.action-btn-edit[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;border:none;padding:5px 10px;border-radius:4px;margin-right:5px;cursor:pointer}.action-btn-edit[_ngcontent-%COMP%]:hover{background-color:#2c82c9}.action-btn-delete[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer}.action-btn-delete[_ngcontent-%COMP%]:hover{background-color:#c0392b}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.55);display:flex;justify-content:center;align-items:center;z-index:2000}.modal-box[_ngcontent-%COMP%]{width:400px;background:white;border-radius:10px;padding:20px;box-shadow:0 5px 18px #0003;animation:_ngcontent-%COMP%_modalPop .25s ease}@keyframes _ngcontent-%COMP%_modalPop{0%{transform:scale(.85);opacity:0}to{transform:scale(1);opacity:1}}.client-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.row[_ngcontent-%COMP%]{display:flex;flex-direction:column}.row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:4px}.row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding:8px 10px;border:1px solid #cbd5e1;border-radius:5px;font-size:14px}.row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:2px solid #2563eb}.buttons-row[_ngcontent-%COMP%]{display:flex;gap:10px}.hint[_ngcontent-%COMP%]{font-size:11px;color:#6b7280}\"]\n      });\n    }\n  }\n  return ClientsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}