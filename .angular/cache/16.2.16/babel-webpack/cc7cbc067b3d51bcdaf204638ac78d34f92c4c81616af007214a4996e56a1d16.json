{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/HP/Desktop/angular-app-actualizado/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ApiService } from '../services/api.service';\nimport { Router } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/api.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../products/products.component\";\nimport * as i5 from \"../users/users.component\";\nimport * as i6 from \"../clients/clients.component\";\nimport * as i7 from \"../sales/sales.component\";\nimport * as i8 from \"../orders/orders.component\";\nimport * as i9 from \"../domain-logs/domain-logs.component\";\nfunction DashboardComponent_li_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 5);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_li_10_Template_li_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.selectSection(\"usuarios\"));\n    });\n    i0.ɵɵelement(1, \"i\", 23);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3, \"Usuarios\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"active\", ctx_r0.selectedSection === \"usuarios\");\n  }\n}\nfunction DashboardComponent_li_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 5);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_li_23_Template_li_click_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.selectSection(\"ordenes\"));\n    });\n    i0.ɵɵelement(1, \"i\", 24);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3, \"\\u00D3rdenes\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"active\", ctx_r1.selectedSection === \"ordenes\");\n  }\n}\nfunction DashboardComponent_li_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 5);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_li_24_Template_li_click_0_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.selectSection(\"logs\"));\n    });\n    i0.ɵɵelement(1, \"i\", 25);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3, \"Logs de dominio\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"active\", ctx_r2.selectedSection === \"logs\");\n  }\n}\nfunction DashboardComponent_span_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Bienvenido, Administrador\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_span_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Bienvenido\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_span_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵelement(1, \"i\", 27);\n    i0.ɵɵtext(2, \" Modo administrador \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_span_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 28);\n    i0.ɵɵelement(1, \"i\", 29);\n    i0.ɵɵtext(2, \" Acceso limitado \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵelement(1, \"i\", 31);\n    i0.ɵɵtext(2, \" Usted tiene un rol con permisos limitados. S\\u00F3lo puede acceder a \");\n    i0.ɵɵelementStart(3, \"strong\");\n    i0.ɵɵtext(4, \"Clientes, Ventas y Productos\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \". \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_38_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \" Desde este panel puede administrar usuarios, clientes, ventas, productos, \\u00F3rdenes y visualizar los logs de la aplicaci\\u00F3n. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_38_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \" Desde este panel puede gestionar sus \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"clientes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \", registrar \");\n    i0.ɵɵelementStart(5, \"strong\");\n    i0.ɵɵtext(6, \"ventas\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \" y administrar \");\n    i0.ɵɵelementStart(8, \"strong\");\n    i0.ɵɵtext(9, \"productos\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \". \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_38_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 55)(1, \"div\", 36);\n    i0.ɵɵelement(2, \"i\", 56);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 38)(4, \"span\", 39);\n    i0.ɵɵtext(5, \"\\u00D3rdenes pendientes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 40);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"span\", 41);\n    i0.ɵɵtext(9, \"Por despachar\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r23 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r23.totalOrdenesPendientes);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    height: a0\n  };\n};\nfunction DashboardComponent_div_38_div_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 57);\n    i0.ɵɵelement(1, \"div\", 58);\n    i0.ɵɵelementStart(2, \"span\", 59);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const m_r26 = ctx.$implicit;\n    const ctx_r24 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(2, _c0, m_r26.value / ctx_r24.maxMonthlySales * 100 + \"%\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(m_r26.label);\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    width: a0\n  };\n};\nfunction DashboardComponent_div_38_div_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 60)(1, \"div\", 61)(2, \"span\", 62);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 63);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 64);\n    i0.ɵɵelement(7, \"div\", 65);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const p_r27 = ctx.$implicit;\n    const ctx_r25 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(p_r27.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r27.value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(3, _c1, p_r27.value / ctx_r25.maxProductSales * 100 + \"%\"));\n  }\n}\nfunction DashboardComponent_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 32)(1, \"div\", 33)(2, \"h2\");\n    i0.ɵɵtext(3, \"Resumen general\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, DashboardComponent_div_38_p_4_Template, 2, 0, \"p\", 15);\n    i0.ɵɵtemplate(5, DashboardComponent_div_38_p_5_Template, 11, 0, \"p\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 34)(7, \"div\", 35)(8, \"div\", 36);\n    i0.ɵɵelement(9, \"i\", 37);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 38)(11, \"span\", 39);\n    i0.ɵɵtext(12, \"Clientes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"span\", 40);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"span\", 41);\n    i0.ɵɵtext(16, \"Registrados en el sistema\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"div\", 42)(18, \"div\", 36);\n    i0.ɵɵelement(19, \"i\", 43);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 38)(21, \"span\", 39);\n    i0.ɵɵtext(22, \"Ventas del mes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"span\", 40);\n    i0.ɵɵtext(24);\n    i0.ɵɵpipe(25, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"span\", 41);\n    i0.ɵɵtext(27, \"Monto facturado\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(28, \"div\", 44)(29, \"div\", 36);\n    i0.ɵɵelement(30, \"i\", 45);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\", 38)(32, \"span\", 39);\n    i0.ɵɵtext(33, \"Productos activos\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"span\", 40);\n    i0.ɵɵtext(35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"span\", 41);\n    i0.ɵɵtext(37, \"Disponibles para la venta\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(38, DashboardComponent_div_38_div_38_Template, 10, 1, \"div\", 46);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"div\", 47)(40, \"div\", 48)(41, \"div\", 49)(42, \"h3\");\n    i0.ɵɵtext(43, \"Ventas del \\u00FAltimo a\\u00F1o\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(44, \"span\", 50);\n    i0.ɵɵtext(45, \"Monto en USD por mes\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(46, \"div\", 51);\n    i0.ɵɵtemplate(47, DashboardComponent_div_38_div_47_Template, 4, 4, \"div\", 52);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(48, \"div\", 48)(49, \"div\", 49)(50, \"h3\");\n    i0.ɵɵtext(51, \"Top productos vendidos\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(52, \"span\", 50);\n    i0.ɵɵtext(53, \"Cantidad de unidades\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(54, \"div\", 53);\n    i0.ɵɵtemplate(55, DashboardComponent_div_38_div_55_Template, 8, 5, \"div\", 54);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.isAdmin);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.isLimitedUser);\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(ctx_r8.totalClientes);\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate1(\"$\", i0.ɵɵpipeBind2(25, 8, ctx_r8.totalVentasMes, \"1.2-2\"), \"\");\n    i0.ɵɵadvance(11);\n    i0.ɵɵtextInterpolate(ctx_r8.totalProductos);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.isAdmin);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r8.monthlySales);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r8.topProducts);\n  }\n}\nfunction DashboardComponent_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 66);\n    i0.ɵɵelement(1, \"app-users\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 66);\n    i0.ɵɵelement(1, \"app-clients\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 66);\n    i0.ɵɵelement(1, \"app-sales\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 66);\n    i0.ɵɵelement(1, \"app-products\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 66);\n    i0.ɵɵelement(1, \"app-orders\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 66);\n    i0.ɵɵelement(1, \"app-domain-logs\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let DashboardComponent = /*#__PURE__*/(() => {\n  class DashboardComponent {\n    get maxMonthlySales() {\n      return Math.max(...this.monthlySales.map(m => m.value), 1);\n    }\n    get maxProductSales() {\n      return Math.max(...this.topProducts.map(p => p.value), 1);\n    }\n    constructor(router, api) {\n      this.router = router;\n      this.api = api;\n      this.selectedSection = 'inicio';\n      // ====== ROLES DEL USUARIO LOGUEADO ======\n      this.roles = [];\n      this.isAdmin = false;\n      this.isLimitedUser = false;\n      this.notAuthorized = false;\n      // ========= KPI / MÉTRICAS DEL DASHBOARD (ejemplo) =========\n      this.totalClientes = 120;\n      this.totalVentasMes = 13450.75;\n      this.totalProductos = 48;\n      this.totalOrdenesPendientes = 7;\n      this.monthlySales = [{\n        label: 'Ene',\n        value: 800\n      }, {\n        label: 'Feb',\n        value: 1200\n      }, {\n        label: 'Mar',\n        value: 950\n      }, {\n        label: 'Abr',\n        value: 1500\n      }, {\n        label: 'May',\n        value: 1100\n      }, {\n        label: 'Jun',\n        value: 1700\n      }];\n      this.topProducts = [{\n        name: 'Chai',\n        value: 120\n      }, {\n        name: 'Chang',\n        value: 95\n      }, {\n        name: 'Aniseed Syrup',\n        value: 80\n      }, {\n        name: 'Ikura',\n        value: 60\n      }];\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        console.log(\"========== DASHBOARD INIT ==========\");\n        const token = localStorage.getItem('token');\n        console.log(\"TOKEN:\", token);\n        if (!token) {\n          console.warn(\"No token → redirigiendo a login.\");\n          localStorage.clear();\n          _this.router.navigate(['/login']);\n          return;\n        }\n        // ================================\n        // 1) DECODIFICAR TOKEN Y OBTENER EMAIL\n        // ================================\n        const payload = _this.decodeToken(token);\n        console.log(\"PAYLOAD TOKEN:\", payload);\n        const emailClaim = 'http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress';\n        const email = payload?.[emailClaim] || payload?.email || null;\n        console.log(\"EMAIL OBTENIDO DEL TOKEN:\", email);\n        if (!email) {\n          alert('No se pudo obtener el email del usuario desde el token.');\n          localStorage.clear();\n          _this.router.navigate(['/login']);\n          return;\n        }\n        // ================================\n        // 2) OBTENER USUARIO POR EMAIL (BACKEND)\n        // ================================\n        try {\n          const url = `https://northwindsaleswebapi20251110192941-hzemfyhkbxdydna7.canadacentral-01.azurewebsites.net/users/obtenerUsuarioPorEmail/${encodeURIComponent(email)}`;\n          console.log(\"Llamando a:\", url);\n          const user = yield _this.api.get(url);\n          console.log(\"USUARIO OBTENIDO DESDE BACKEND:\", user);\n          console.log(\"Claves del objeto usuario:\", user ? Object.keys(user) : null);\n          // ================================\n          // 3) EXTRAER ROLES DEL USUARIO\n          // ================================\n          let rolesNames = [];\n          // Caso más probable: user.roles = [\"Administrator\", \"DataEntry\", ...]\n          if (user && Array.isArray(user.roles)) {\n            if (user.roles.length && typeof user.roles[0] === 'string') {\n              rolesNames = user.roles;\n              console.log(\"→ Roles como string[]:\", rolesNames);\n            } else if (user.roles.length && typeof user.roles[0] === 'object') {\n              rolesNames = user.roles.map(r => r?.name).filter(n => typeof n === 'string');\n              console.log(\"→ Roles como objetos, nombres extraídos:\", rolesNames);\n            }\n          }\n          // Por si el backend envía un único rol como propiedad suelta\n          if (rolesNames.length === 0 && user?.role && typeof user.role === 'string') {\n            rolesNames = [user.role];\n            console.log(\"→ Un solo rol en user.role:\", rolesNames);\n          }\n          // Guardamos roles en la propiedad del componente\n          _this.roles = rolesNames;\n          console.log(\"ROLES PROCESADOS EN DASHBOARD:\", _this.roles);\n        } catch (err) {\n          console.error(\"Error al obtener usuario por email:\", err);\n          alert('No se pudieron obtener los roles del usuario.');\n          localStorage.clear();\n          _this.router.navigate(['/login']);\n          return;\n        }\n        // ================================\n        // 4) REGLAS DE ACCESO SEGÚN ROL\n        // ================================\n        const adminRoles = [\"Administrator\", \"ReadAdmin\"];\n        _this.isAdmin = _this.roles.some(r => adminRoles.includes(r));\n        _this.isLimitedUser = _this.roles.length > 0 && !_this.isAdmin;\n        _this.notAuthorized = _this.roles.length === 0;\n        console.log(\"isAdmin:\", _this.isAdmin);\n        console.log(\"isLimitedUser:\", _this.isLimitedUser);\n        console.log(\"notAuthorized:\", _this.notAuthorized);\n        if (_this.notAuthorized) {\n          alert(\"No tienes roles asignados. Contacta al administrador del sistema.\");\n          localStorage.clear();\n          _this.router.navigate(['/login']);\n          return;\n        }\n        // Para que el usuario limitado no vea el inicio de \"admin\" como algo raro\n        if (_this.isLimitedUser) {\n          _this.selectedSection = 'clientes';\n        }\n      })();\n    }\n    // ================================\n    //   CAMBIO DE SECCIÓN\n    // ================================\n    selectSection(id) {\n      console.log(\"Usuario intenta abrir sección:\", id);\n      if (this.isAdmin) {\n        console.log(\"→ ADMIN, acceso permitido a:\", id);\n        this.selectedSection = id;\n        return;\n      }\n      // Usuarios con cualquier otro rol:\n      const allowed = [\"inicio\", \"clientes\", \"ventas\", \"productos\"];\n      if (!allowed.includes(id)) {\n        console.warn(\"→ ACCESO DENEGADO a sección:\", id);\n        this.selectedSection = \"clientes\";\n        return;\n      }\n      console.log(\"→ Usuario con rol limitado, acceso permitido a:\", id);\n      this.selectedSection = id;\n    }\n    logout() {\n      console.log(\"Cerrando sesión…\");\n      localStorage.clear();\n      this.router.navigate(['/login']);\n    }\n    // ================================\n    //   HELPER PARA DECODIFICAR JWT\n    // ================================\n    decodeToken(token) {\n      try {\n        const payloadBase64 = token.split('.')[1];\n        const json = atob(payloadBase64.replace(/-/g, '+').replace(/_/g, '/'));\n        return JSON.parse(json);\n      } catch (e) {\n        console.error(\"Error al decodificar token:\", e);\n        return null;\n      }\n    }\n    static {\n      this.ɵfac = function DashboardComponent_Factory(t) {\n        return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ApiService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: DashboardComponent,\n        selectors: [[\"app-dashboard\"]],\n        decls: 45,\n        vars: 23,\n        consts: [[1, \"dashboard-container\"], [1, \"sidebar\"], [1, \"menu-title\"], [1, \"fa-solid\", \"fa-gauge-high\", \"icon-left\"], [1, \"menu-list\"], [1, \"menu-item\", 3, \"click\"], [1, \"fa-solid\", \"fa-house\", \"icon\"], [\"class\", \"menu-item\", 3, \"active\", \"click\", 4, \"ngIf\"], [1, \"fa-solid\", \"fa-users\", \"icon\"], [1, \"fa-solid\", \"fa-file-invoice-dollar\", \"icon\"], [1, \"fa-solid\", \"fa-boxes-stacked\", \"icon\"], [1, \"content\"], [1, \"topbar\"], [1, \"topbar-left\"], [1, \"fa-solid\", \"fa-circle-user\"], [4, \"ngIf\"], [\"class\", \"role-badge admin\", 4, \"ngIf\"], [\"class\", \"role-badge limited\", 4, \"ngIf\"], [1, \"btn-logout\", 3, \"click\"], [1, \"fa-solid\", \"fa-right-from-bracket\"], [\"class\", \"limited-banner\", 4, \"ngIf\"], [\"class\", \"section visible\", 4, \"ngIf\"], [\"class\", \"section\", 4, \"ngIf\"], [1, \"fa-solid\", \"fa-user-gear\", \"icon\"], [1, \"fa-solid\", \"fa-receipt\", \"icon\"], [1, \"fa-solid\", \"fa-scroll\", \"icon\"], [1, \"role-badge\", \"admin\"], [1, \"fa-solid\", \"fa-crown\"], [1, \"role-badge\", \"limited\"], [1, \"fa-solid\", \"fa-user-lock\"], [1, \"limited-banner\"], [1, \"fa-solid\", \"fa-circle-info\"], [1, \"section\", \"visible\"], [1, \"welcome-card\"], [1, \"kpi-grid\"], [1, \"kpi-card\", \"kpi-clients\"], [1, \"kpi-icon\"], [1, \"fa-solid\", \"fa-users\"], [1, \"kpi-content\"], [1, \"kpi-label\"], [1, \"kpi-value\"], [1, \"kpi-sub\"], [1, \"kpi-card\", \"kpi-sales\"], [1, \"fa-solid\", \"fa-coins\"], [1, \"kpi-card\", \"kpi-products\"], [1, \"fa-solid\", \"fa-boxes-stacked\"], [\"class\", \"kpi-card kpi-orders\", 4, \"ngIf\"], [1, \"charts-row\"], [1, \"chart-card\"], [1, \"chart-header\"], [1, \"chart-subtitle\"], [1, \"bar-chart\"], [\"class\", \"bar-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"top-products-list\"], [\"class\", \"top-product-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"kpi-card\", \"kpi-orders\"], [1, \"fa-solid\", \"fa-receipt\"], [1, \"bar-item\"], [1, \"bar\", 3, \"ngStyle\"], [1, \"bar-label\"], [1, \"top-product-item\"], [1, \"top-product-header\"], [1, \"top-product-name\"], [1, \"top-product-value\"], [1, \"top-product-bar-bg\"], [1, \"top-product-bar-fill\", 3, \"ngStyle\"], [1, \"section\"]],\n        template: function DashboardComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"aside\", 1)(2, \"h3\", 2);\n            i0.ɵɵelement(3, \"i\", 3);\n            i0.ɵɵtext(4, \" Panel principal \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"ul\", 4)(6, \"li\", 5);\n            i0.ɵɵlistener(\"click\", function DashboardComponent_Template_li_click_6_listener() {\n              return ctx.selectSection(\"inicio\");\n            });\n            i0.ɵɵelement(7, \"i\", 6);\n            i0.ɵɵelementStart(8, \"span\");\n            i0.ɵɵtext(9, \"Inicio\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(10, DashboardComponent_li_10_Template, 4, 2, \"li\", 7);\n            i0.ɵɵelementStart(11, \"li\", 5);\n            i0.ɵɵlistener(\"click\", function DashboardComponent_Template_li_click_11_listener() {\n              return ctx.selectSection(\"clientes\");\n            });\n            i0.ɵɵelement(12, \"i\", 8);\n            i0.ɵɵelementStart(13, \"span\");\n            i0.ɵɵtext(14, \"Clientes\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(15, \"li\", 5);\n            i0.ɵɵlistener(\"click\", function DashboardComponent_Template_li_click_15_listener() {\n              return ctx.selectSection(\"ventas\");\n            });\n            i0.ɵɵelement(16, \"i\", 9);\n            i0.ɵɵelementStart(17, \"span\");\n            i0.ɵɵtext(18, \"Ventas\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(19, \"li\", 5);\n            i0.ɵɵlistener(\"click\", function DashboardComponent_Template_li_click_19_listener() {\n              return ctx.selectSection(\"productos\");\n            });\n            i0.ɵɵelement(20, \"i\", 10);\n            i0.ɵɵelementStart(21, \"span\");\n            i0.ɵɵtext(22, \"Productos\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(23, DashboardComponent_li_23_Template, 4, 2, \"li\", 7);\n            i0.ɵɵtemplate(24, DashboardComponent_li_24_Template, 4, 2, \"li\", 7);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(25, \"main\", 11)(26, \"div\", 12)(27, \"div\", 13)(28, \"h1\");\n            i0.ɵɵelement(29, \"i\", 14);\n            i0.ɵɵtemplate(30, DashboardComponent_span_30_Template, 2, 0, \"span\", 15);\n            i0.ɵɵtemplate(31, DashboardComponent_span_31_Template, 2, 0, \"span\", 15);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(32, DashboardComponent_span_32_Template, 3, 0, \"span\", 16);\n            i0.ɵɵtemplate(33, DashboardComponent_span_33_Template, 3, 0, \"span\", 17);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(34, \"button\", 18);\n            i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_34_listener() {\n              return ctx.logout();\n            });\n            i0.ɵɵelement(35, \"i\", 19);\n            i0.ɵɵtext(36, \" Cerrar sesi\\u00F3n \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(37, DashboardComponent_div_37_Template, 6, 0, \"div\", 20);\n            i0.ɵɵtemplate(38, DashboardComponent_div_38_Template, 56, 11, \"div\", 21);\n            i0.ɵɵtemplate(39, DashboardComponent_div_39_Template, 2, 0, \"div\", 22);\n            i0.ɵɵtemplate(40, DashboardComponent_div_40_Template, 2, 0, \"div\", 22);\n            i0.ɵɵtemplate(41, DashboardComponent_div_41_Template, 2, 0, \"div\", 22);\n            i0.ɵɵtemplate(42, DashboardComponent_div_42_Template, 2, 0, \"div\", 22);\n            i0.ɵɵtemplate(43, DashboardComponent_div_43_Template, 2, 0, \"div\", 22);\n            i0.ɵɵtemplate(44, DashboardComponent_div_44_Template, 2, 0, \"div\", 22);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(6);\n            i0.ɵɵclassProp(\"active\", ctx.selectedSection === \"inicio\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.isAdmin);\n            i0.ɵɵadvance(1);\n            i0.ɵɵclassProp(\"active\", ctx.selectedSection === \"clientes\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵclassProp(\"active\", ctx.selectedSection === \"ventas\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵclassProp(\"active\", ctx.selectedSection === \"productos\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.isAdmin);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.isAdmin);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngIf\", ctx.isAdmin);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLimitedUser);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.isAdmin);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLimitedUser);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLimitedUser);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.selectedSection === \"inicio\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.selectedSection === \"usuarios\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.selectedSection === \"clientes\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.selectedSection === \"ventas\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.selectedSection === \"productos\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.selectedSection === \"ordenes\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.selectedSection === \"logs\");\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i3.NgStyle, i4.ProductsComponent, i5.UsersComponent, i6.ClientsComponent, i7.SalesComponent, i8.OrdersComponent, i9.DomainLogsComponent, i3.DecimalPipe],\n        styles: [\"[_nghost-%COMP%]{display:block;min-height:calc(100vh - 70px)}.dashboard-container[_ngcontent-%COMP%]{display:flex;height:calc(100vh - 70px)}.sidebar[_ngcontent-%COMP%]{width:260px;background:#236fa2;padding:1rem 0;color:#fff;border-right:4px solid rgba(255,255,255,.1);display:flex;flex-direction:column}.menu-title[_ngcontent-%COMP%]{font-size:1.3rem;padding:1rem 1.5rem;font-weight:600;display:flex;align-items:center;gap:.6rem}.icon-left[_ngcontent-%COMP%]{font-size:1.4rem}.menu-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.menu-item[_ngcontent-%COMP%]{padding:1.1rem 1.5rem;display:flex;align-items:center;font-size:1.05rem;cursor:pointer;border-top:1px solid rgba(255,255,255,.12);border-bottom:1px solid rgba(255,255,255,.12);transition:background .25s,padding-left .2s}.menu-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:28px;display:inline-block;font-size:1.2rem;margin-right:10px}.menu-item[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.18);padding-left:1.7rem}.menu-item.active[_ngcontent-%COMP%]{background:rgba(255,255,255,.25)}.content[_ngcontent-%COMP%]{flex:1;padding:1.5rem 2rem;background:#f3f4f6;overflow-y:auto}.topbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.topbar-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:1.5rem;display:flex;align-items:center;gap:.6rem}.topbar-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#2563eb}.role-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.4rem;padding:.25rem .7rem;border-radius:999px;font-size:.8rem;margin-top:.4rem}.role-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem}.role-badge.admin[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.role-badge.limited[_ngcontent-%COMP%]{background:#e0f2fe;color:#075985}.btn-logout[_ngcontent-%COMP%]{background:#ef4444;color:#fff;border:none;padding:.5rem .9rem;border-radius:999px;cursor:pointer;display:inline-flex;align-items:center;gap:.4rem;font-size:.9rem}.btn-logout[_ngcontent-%COMP%]:hover{background:#dc2626}.limited-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6rem;background:#fff7ed;border:1px solid #fed7aa;color:#9a3412;padding:.7rem 1rem;border-radius:8px;font-size:.9rem;margin-bottom:1rem}.welcome-card[_ngcontent-%COMP%]{background:#ffffff;border-radius:10px;padding:1.5rem 1.6rem;box-shadow:0 2px 8px #0f172a0f;margin-bottom:1.5rem}.welcome-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#111827;margin-bottom:.5rem}.welcome-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#4b5563}.kpi-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(210px,1fr));gap:1rem;margin-bottom:1.5rem}.kpi-card[_ngcontent-%COMP%]{background:#ffffff;border-radius:12px;padding:1rem 1.1rem;display:flex;gap:.8rem;align-items:center;box-shadow:0 1px 6px #0f172a0f}.kpi-icon[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:999px;display:flex;align-items:center;justify-content:center;font-size:1.4rem;color:#fff}.kpi-clients[_ngcontent-%COMP%]   .kpi-icon[_ngcontent-%COMP%]{background:#0ea5e9}.kpi-sales[_ngcontent-%COMP%]   .kpi-icon[_ngcontent-%COMP%]{background:#22c55e}.kpi-products[_ngcontent-%COMP%]   .kpi-icon[_ngcontent-%COMP%]{background:#6366f1}.kpi-orders[_ngcontent-%COMP%]   .kpi-icon[_ngcontent-%COMP%]{background:#f97316}.kpi-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.kpi-label[_ngcontent-%COMP%]{font-size:.85rem;color:#6b7280}.kpi-value[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;color:#111827}.kpi-sub[_ngcontent-%COMP%]{font-size:.8rem;color:#9ca3af}.charts-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1.5fr;gap:1.2rem}.chart-card[_ngcontent-%COMP%]{background:#ffffff;border-radius:10px;padding:1rem 1.2rem;box-shadow:0 1px 6px #0f172a0f;min-height:260px}.chart-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#111827;font-size:1.1rem}.chart-subtitle[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280}.bar-chart[_ngcontent-%COMP%]{margin-top:1.2rem;display:flex;align-items:flex-end;justify-content:space-between;height:180px;gap:.6rem}.bar-item[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center}.bar[_ngcontent-%COMP%]{width:100%;border-radius:6px 6px 0 0;background:linear-gradient(180deg,#2563eb,#93c5fd);transition:height .3s ease}.bar-label[_ngcontent-%COMP%]{margin-top:.25rem;font-size:.7rem;color:#6b7280}.top-products-list[_ngcontent-%COMP%]{margin-top:1.2rem;display:flex;flex-direction:column;gap:.7rem}.top-product-item[_ngcontent-%COMP%]{font-size:.85rem}.top-product-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.15rem;color:#374151}.top-product-name[_ngcontent-%COMP%]{font-weight:500}.top-product-value[_ngcontent-%COMP%]{color:#6b7280}.top-product-bar-bg[_ngcontent-%COMP%]{width:100%;height:6px;border-radius:999px;background:#e5e7eb;overflow:hidden}.top-product-bar-fill[_ngcontent-%COMP%]{height:100%;border-radius:999px;background:linear-gradient(90deg,#22c55e,#bbf7d0);transition:width .3s ease}\"]\n      });\n    }\n  }\n  return DashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}